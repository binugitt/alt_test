version: "3"

services:

  mysql:
    image: mysql:8.0.29
    environment:
        MYSQL_ROOT_PASSWORD: 'password'
        MYSQL_DATABASE: 'TestDB'
    ports:
      - 3306:3306


  mktdata:
    build:
        context: ./
        dockerfile: ./mktdata/Dockerfile
    command: python3 mktdata.py
    #command: python3 ./mktdata/mktdata.py
    ports:
      - 1234:1234
    depends_on:
      - mysql


  mysql_client:
    build:
        context: ./
        dockerfile: ./mysql_client/Dockerfile
    command: python3 mysql_client.py
    #command: python3 ./mysql_client/mysql_client.py
    network_mode: host
    depends_on:
      - mktdata
      - mysql

